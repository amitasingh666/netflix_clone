import {
  videojs
} from "./chunk-L4SSV4WR.js";
import "./chunk-HE35I2H7.js";
import "./chunk-5WWUZCGV.js";

// node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js
function _setPrototypeOf(t, e) {
  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t2, e2) {
    return t2.__proto__ = e2, t2;
  }, _setPrototypeOf(t, e);
}

// node_modules/@babel/runtime/helpers/esm/inheritsLoose.js
function _inheritsLoose(t, o) {
  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o);
}

// node_modules/videojs-hls-quality-selector/package.json
var version = "2.0.0";

// node_modules/videojs-hls-quality-selector/es/ConcreteButton.js
var MenuButton = videojs.getComponent("MenuButton");
var Menu = videojs.getComponent("Menu");
var Component = videojs.getComponent("Component");
var Dom = videojs.dom;
function toTitleCase(string) {
  if (typeof string !== "string") {
    return string;
  }
  return string.charAt(0).toUpperCase() + string.slice(1);
}
var ConcreteButton = function(_MenuButton) {
  _inheritsLoose(ConcreteButton2, _MenuButton);
  function ConcreteButton2(player) {
    return _MenuButton.call(this, player, {
      title: player.localize("Quality"),
      name: "QualityButton"
    }) || this;
  }
  var _proto = ConcreteButton2.prototype;
  _proto.createItems = function createItems() {
    return [];
  };
  _proto.createMenu = function createMenu() {
    var menu = new Menu(this.player_, {
      menuButton: this
    });
    this.hideThreshold_ = 0;
    if (this.options_.title) {
      var titleEl = Dom.createEl("li", {
        className: "vjs-menu-title",
        innerHTML: toTitleCase(this.options_.title),
        tabIndex: -1
      });
      var titleComponent = new Component(this.player_, {
        el: titleEl
      });
      this.hideThreshold_ += 1;
      menu.addItem(titleComponent);
    }
    this.items = this.createItems();
    if (this.items) {
      for (var i = 0; i < this.items.length; i++) {
        menu.addItem(this.items[i]);
      }
    }
    return menu;
  };
  return ConcreteButton2;
}(MenuButton);

// node_modules/videojs-hls-quality-selector/es/ConcreteMenuItem.js
var VideoJsMenuItemClass = videojs.getComponent("MenuItem");
var ConcreteMenuItem = function(_VideoJsMenuItemClass) {
  _inheritsLoose(ConcreteMenuItem2, _VideoJsMenuItemClass);
  function ConcreteMenuItem2(player, item, qualityButton, plugin) {
    var _this;
    _this = _VideoJsMenuItemClass.call(this, player, {
      label: item.label,
      selectable: true,
      selected: item.selected || false
    }) || this;
    _this.item = item;
    _this.qualityButton = qualityButton;
    _this.plugin = plugin;
    return _this;
  }
  var _proto = ConcreteMenuItem2.prototype;
  _proto.handleClick = function handleClick() {
    for (var i = 0; i < this.qualityButton.items.length; ++i) {
      this.qualityButton.items[i].selected(false);
    }
    this.plugin.setQuality(this.item.value);
    this.selected(true);
  };
  return ConcreteMenuItem2;
}(VideoJsMenuItemClass);

// node_modules/videojs-hls-quality-selector/es/plugin.js
var Plugin = videojs.getPlugin("plugin");
var defaults = {};
var HlsQualitySelector = function(_Plugin) {
  _inheritsLoose(HlsQualitySelector2, _Plugin);
  function HlsQualitySelector2(player, options) {
    var _this;
    _this = _Plugin.call(this, player) || this;
    _this.options = videojs.obj.merge(defaults, options);
    _this.player.ready(function() {
      if (_this.player.qualityLevels) {
        _this.player.addClass("vjs-hls-quality-selector");
        _this.createQualityButton();
        _this.bindPlayerEvents();
      }
    });
    return _this;
  }
  var _proto = HlsQualitySelector2.prototype;
  _proto.bindPlayerEvents = function bindPlayerEvents() {
    this.player.qualityLevels().on("addqualitylevel", this.onAddQualityLevel.bind(this));
  };
  _proto.createQualityButton = function createQualityButton() {
    var player = this.player;
    this._qualityButton = new ConcreteButton(player);
    var placementIndex = player.controlBar.children().length - 2;
    var concreteButtonInstance = player.controlBar.addChild(this._qualityButton, {
      componentClass: "qualitySelector"
    }, this.options.placementIndex || placementIndex);
    concreteButtonInstance.addClass("vjs-quality-selector");
    if (!this.options.displayCurrentQuality) {
      var icon = " " + (this.options.vjsIconClass || "vjs-icon-hd");
      concreteButtonInstance.menuButton_.$(".vjs-icon-placeholder").className += icon;
    } else {
      this.setButtonInnerText(player.localize("Auto"));
    }
    concreteButtonInstance.removeClass("vjs-hidden");
  };
  _proto.setButtonInnerText = function setButtonInnerText(text) {
    this._qualityButton.menuButton_.$(".vjs-icon-placeholder").innerHTML = text;
  };
  _proto.getQualityMenuItem = function getQualityMenuItem(item) {
    var player = this.player;
    return new ConcreteMenuItem(player, item, this._qualityButton, this);
  };
  _proto.onAddQualityLevel = function onAddQualityLevel() {
    var _this2 = this;
    var player = this.player;
    var qualityList = player.qualityLevels();
    var levels = qualityList.levels_ || [];
    var levelItems = [];
    var _loop = function _loop2() {
      var _levels$i = levels[i], width = _levels$i.width, height = _levels$i.height;
      var pixels = width > height ? height : width;
      if (!pixels) {
        return 1;
      }
      if (!levelItems.filter(function(_existingItem) {
        return _existingItem.item && _existingItem.item.value === pixels;
      }).length) {
        var levelItem = _this2.getQualityMenuItem.call(_this2, {
          label: pixels + "p",
          value: pixels
        });
        levelItems.push(levelItem);
      }
    };
    for (var i = 0; i < levels.length; ++i) {
      if (_loop())
        continue;
    }
    levelItems.sort(function(current, next) {
      if (typeof current !== "object" || typeof next !== "object") {
        return -1;
      }
      if (current.item.value < next.item.value) {
        return -1;
      }
      if (current.item.value > next.item.value) {
        return 1;
      }
      return 0;
    });
    levelItems.push(this.getQualityMenuItem.call(this, {
      label: this.player.localize("Auto"),
      value: "auto",
      selected: true
    }));
    if (this._qualityButton) {
      this._qualityButton.createItems = function() {
        return levelItems;
      };
      this._qualityButton.update();
    }
  };
  _proto.setQuality = function setQuality(quality) {
    var qualityList = this.player.qualityLevels();
    this._currentQuality = quality;
    if (this.options.displayCurrentQuality) {
      this.setButtonInnerText(quality === "auto" ? this.player.localize("Auto") : quality + "p");
    }
    for (var i = 0; i < qualityList.length; ++i) {
      var _qualityList$i = qualityList[i], width = _qualityList$i.width, height = _qualityList$i.height;
      var pixels = width > height ? height : width;
      qualityList[i].enabled = pixels === quality || quality === "auto";
    }
    this._qualityButton.unpressButton();
  };
  _proto.getCurrentQuality = function getCurrentQuality() {
    return this._currentQuality || "auto";
  };
  return HlsQualitySelector2;
}(Plugin);
HlsQualitySelector.VERSION = version;
videojs.registerPlugin("hlsQualitySelector", HlsQualitySelector);
var plugin_default = HlsQualitySelector;
export {
  plugin_default as default
};
//# sourceMappingURL=videojs-hls-quality-selector.js.map
